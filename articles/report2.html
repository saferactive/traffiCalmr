<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SaferActive Report 2: Scenarios • trafficalmr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="SaferActive Report 2: Scenarios">
<meta property="og:description" content="trafficalmr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trafficalmr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/report1.html">SaferActive Report 1: Data</a>
    </li>
    <li>
      <a href="../articles/report2.html">SaferActive Report 2: Scenarios</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/saferactive/trafficalmr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="report2_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>SaferActive Report 2: Scenarios</h1>
                        <h4 class="author">Institute for Transport Studies</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/saferactive/trafficalmr/blob/master/vignettes/report2.Rmd"><code>vignettes/report2.Rmd</code></a></small>
      <div class="hidden name"><code>report2.Rmd</code></div>

    </div>

    
    
<div id="software-development" class="section level1">
<h1 class="hasAnchor">
<a href="#software-development" class="anchor"></a>Software development</h1>
<p>One of the objectives of the project was to develop software to enable access to data on traffic calming interventions.
We have progressed with the development of the <code>trafficalmr</code> package for reproducible road safety analysis, supporting the project and other projects on road safety.
We would like feedback from stakeholders: is it easy to use? what additional functionality would you like to see? The list of functions provided by the package can be found here: <a href="https://saferactive.github.io/trafficalmr/reference/index.html" class="uri">https://saferactive.github.io/trafficalmr/reference/index.html</a></p>
</div>
<div id="temporal-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#temporal-analysis" class="anchor"></a>Temporal analysis</h1>
<p>We analysed the DfT’s manual traffic count data to explore its potential to provide estimates of the geographic distribution of cycling uptake over time.
There is an uneven number of locations where annual average daily flow (AADF) estimates are available, as shown in Figure <a href="#fig:aadf-counts-per-year">1</a>.</p>
<div class="figure">
<span id="fig:aadf-counts-per-year"></span>
<img src="https://raw.githubusercontent.com/saferactive/saferactive/master/figures/aadf-counts-per-year.png" alt="AADF counts per year in the DfT's traffic counter dataset (left), and the number of annual surveys per count location (right)" width="49%"><img src="https://raw.githubusercontent.com/saferactive/saferactive/master/figures/aadf-counts-per-year-2-plus.png" alt="AADF counts per year in the DfT's traffic counter dataset (left), and the number of annual surveys per count location (right)" width="49%"><p class="caption">
Figure 1: AADF counts per year in the DfT’s traffic counter dataset (left), and the number of annual surveys per count location (right)
</p>
</div>
<p>Figure <a href="#fig:aadf-counts-per-year">1</a> reveals there are &gt;2000 locations that have been sampled just once over the years 2000-2019, and &gt;4000 locations that have been sampled in just two years across these decades.
Relatively few locations have been sampled in more than 11 years.
However, sampling location selection has been more consistent over the period 2010-2019.</p>
<p>Over the years 2010 to 2019, there are 3,049 count locations which had continuous readings for each of these 10 years.
This represents 35% of the total counts in these years.
Taking solely these 3,049 count locations, we are able to generate estimates of cycling uptake at the local authority level which are fully independent of year-to-year changes in the location and type of roads chosen for cycle counts.
These uptake estimates are presented, relative to 2011 cycling levels, in Figure <a href="#fig:aadf-uptake-2011-multiplier-line-mean">2</a>, showing an upward trend in cycling uptake in the first half of the decade.</p>
<div class="figure">
<span id="fig:aadf-uptake-2011-multiplier-line-mean"></span>
<img src="https://raw.githubusercontent.com/saferactive/saferactive/master/figures/aadf-uptake-2011-multiplier-line-mean.png" alt="Cycling uptake estimates for all local authorities in Great Britain. Black line width represents the number of counters in each local authority, the white line represents no cycling uptake, and the red line is the weighted mean for all cycle counters from 2010 to 2019." width="100%"><p class="caption">
Figure 2: Cycling uptake estimates for all local authorities in Great Britain. Black line width represents the number of counters in each local authority, the white line represents no cycling uptake, and the red line is the weighted mean for all cycle counters from 2010 to 2019.
</p>
</div>
<p>The mean AADF per year, across the 3,049 count locations with complete annual data for the years 2010-2019, is shown in Table /<span class="citation">(<span class="citeproc-not-found" data-reference-id="ref"><strong>???</strong></span>)</span>(tab:tab1).</p>
<p>By contrast, if we include all cycle count points, the trend is very different…
One reason for this is that counts are made on roads of very different types.
From year to year, the number of counts held on roads of different types varies, although there is greater consistently in the decade 2010-2019 than in previous years.</p>
<p>We further investigate cycle flows on different types of road.
For count points with continuous readings in the years 2010-2019, 75% are on ‘C’ and unclassified roads, 24% on ‘B’ roads, and less than 1% on principal or trunk ‘A’ roads.
By comparison, of all count points during these years, 47% of counts are on ‘C’ and unclassified roads, 14% on ‘B’ roads, 31% on principal ‘A’ roads and 8% on trunk ‘A’ roads.</p>
<p>Of the road types studied, mean AADF is highest on Principal ‘A’ roads at 214 cycles per day, and lowest on Trunk ‘A’ roads at 2.4 cycles per day.
On Trunk ‘A’ roads, zero cyclists were recorded at 34% of counts; many of these may represent locations on major national routes that are unsuitable for most cyclists.
However, the increase in cycling uptake during the years 2010-2014 corresponds to counts from minor roads (‘B’, ‘C’ and unclassified roads).</p>
<!-- Using all cycle count points in London over the years 2010-2019, we produced a GAM model with smooth terms for year, space, road category.... -->
<p>Preliminary results, based on a General Additive Model (GAM) are shown in Figure <a href="#fig:gam1">3</a>.</p>
<div class="figure">
<span id="fig:gam1"></span>
<img src="https://raw.githubusercontent.com/saferactive/saferactive/master/figures/cycle-uptake-la-london-smoothed.png" alt="Preliminary estimates of cycling uptake in London boroughs relative to 2011 levels, 2000-2018. A selection of boroughs of interest are highlighted for reference."><p class="caption">
Figure 3: Preliminary estimates of cycling uptake in London boroughs relative to 2011 levels, 2000-2018. A selection of boroughs of interest are highlighted for reference.
</p>
</div>
<p>Building on results for London, we scaled-up the approach to provide nationwide spatio-temporal estimates of cycling.</p>
<p>The national GAM model has smooth terms for the variables year, space and road category, each of which were found to be significant at p&lt;0.05.
This model uses all counts during the years 2010-2019, not just the counts from locations that were sampled every year.
This allows us to make full use of the available data.</p>
<p>The smooth term for year uses a cubic regression spline with 5 knots.
The cubic spline utilises a low number of knots spread at even intervals through the range of parameter values.
This helps to prevent overfitting.</p>
<p>British National Grid eastings and northings are represented in a duchon spline, which allows for two dimensional smoothing.
This spline has 100 knots, enabling the representation of complex spatial patterns in cycling levels across the UK.</p>
<p>Road category is included as a random effect in the model.
Its inclusion is vital given that cycling levels vary greatly according to the type of road surveyed, and the number of counts from roads of each category varies from year to year.</p>
<p>The partial effects of year are shown in Figure <a href="#fig:gam-year">4</a>.</p>
<div class="figure">
<span id="fig:gam-year"></span>
<img src="https://raw.githubusercontent.com/saferactive/saferactive/master/figures/GAM-partial-effect-of-year.png" alt="Partial effects of year in a national GAM model for cycle counts 2010-2019"><p class="caption">
Figure 4: Partial effects of year in a national GAM model for cycle counts 2010-2019
</p>
</div>
<p>The partial effects of space are shown in Figure <a href="#fig:gam-space">5</a>.</p>
<div class="figure">
<span id="fig:gam-space"></span>
<img src="https://raw.githubusercontent.com/saferactive/saferactive/master/figures/GAM-partial-effect-of-space.png" alt="Partial effects of year in a national GAM model for cycle counts 2010-2019"><p class="caption">
Figure 5: Partial effects of year in a national GAM model for cycle counts 2010-2019
</p>
</div>
<p>The results of this GAM model can be applied to Local Authorities….</p>
</div>
<div id="geographic-data-analysis" class="section level1">
<h1 class="hasAnchor">
<a href="#geographic-data-analysis" class="anchor"></a>Geographic data analysis</h1>
<p>Building on methods we initially developed for the <a href="https://www.cyipt.bike/">CyIPT</a> project, we have developed new techniques for allocating crashes to features on the road network, such as junctions and road sections.
Preliminary results comparing CyIPT results and results from this project are shown in Figure <a href="#fig:cyipt-crash">6</a>.</p>
<div class="figure">
<span id="fig:cyipt-crash"></span>
<img src="https://raw.githubusercontent.com/saferactive/saferactive/master/figures/cyipt-crashes1-2.png" alt="CyIPT methods for allocating crashes to juctions (left) compared with preliminary results of updated methods developed for the SaferActive project (right)." width="40%"><img src="https://raw.githubusercontent.com/saferactive/saferactive/master/figures/cyipt-crashes2.png" alt="CyIPT methods for allocating crashes to juctions (left) compared with preliminary results of updated methods developed for the SaferActive project (right)." width="40%"><p class="caption">
Figure 6: CyIPT methods for allocating crashes to juctions (left) compared with preliminary results of updated methods developed for the SaferActive project (right).
</p>
</div>
<p>The objective of this part of the project is to increase to measure to level of risk of collisions at a very high level of spatial detail. Ideally we seek to use historical data to identify specific roads and junctions which are especially dangerous and thus need to be fixed.</p>
<p>The first stage of the process is to separate crashes which occurred at junctions, and those that did not. Junctions are a known “hotspot” for collisions thus should be treated separately from roads in general. Fortunately the stats19 data indicated whether a collision occurred at or near a junction.
The second stage of the process it to simplify the road and junction network for analysis. This is a complex multistage process, but the overall objective is to reduce the road network so simple an easily comprehensible from by excluding and aggregating unnecessary details. For example, a single road will be represented within the OpenStreetMap as many geometries. For our purposes, a single line representing the main centreline of the road is sufficient. Thus small details just a turning lanes, or alleyways are removed and road segments are combined into a single linestring. Road segments are grouped by road name and reference allowing for “human legible” road units to be constructed. In the case of very long roads (over 1km) roads are broken into 500m sections.</p>
<p>Junctions are similarly simplified. Firstly, all junction points are extracted from the OSM. Junction points are then clustered together to reflect how we naturally think about junctions. For example, a roundabout is a single large junction not 4 - 10 small junctions arranged in a circle. Here a balance has to be struck between making the clusters large enough that big complex junctions are grouped together, while not being so large that densely packed urban streets become a single super-junction. We found a 15 metre buffer to be the optimal size for coalescing junction clusters.</p>
<p>The third stage is to associate the point crash data with the appropriate road or junction. Here we had to balance accuracy against performance. Measuring the distance between every crash and every road would take an inordinate about of time. Thus we must use cleaver shortcuts to reduce to computational load without risking incorrectly matching crashed and roads.</p>
<p>Once matching is completed is it possible to map the number of crashes or casualties for each road and junction over the last 10 years.</p>
<div class="figure">
<span id="fig:cyipt-crash2"></span>
<img src="london_cas_2010-2019_roads.png" alt="Preliminary maps of London roads showing number of casualties over the last 10 years from crashed not at junctions" width="40%"><p class="caption">
Figure 7: Preliminary maps of London roads showing number of casualties over the last 10 years from crashed not at junctions
</p>
</div>
</div>
<div id="analysis-of-data-on-traffic-calming" class="section level1">
<h1 class="hasAnchor">
<a href="#analysis-of-data-on-traffic-calming" class="anchor"></a>Analysis of data on traffic calming</h1>
</div>
<div id="scenario-development" class="section level1">
<h1 class="hasAnchor">
<a href="#scenario-development" class="anchor"></a>Scenario development</h1>
</div>
<div id="next-steps" class="section level1">
<h1 class="hasAnchor">
<a href="#next-steps" class="anchor"></a>Next steps</h1>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Robin Lovelace, Malcolm Morgan, Layik Hama, Caroline Tait.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
