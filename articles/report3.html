<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SaferActive Report 3 • trafficalmr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="SaferActive Report 3">
<meta property="og:description" content="trafficalmr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trafficalmr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/report1.html">SaferActive Report 1: Data</a>
    </li>
    <li>
      <a href="../articles/report2.html">SaferActive Report 2: Scenarios</a>
    </li>
    <li>
      <a href="../articles/report3.html">SaferActive Report 3</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/saferactive/trafficalmr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="report3_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>SaferActive Report 3</h1>
                        <h4 class="author">Institute for Transport Studies</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/saferactive/trafficalmr/blob/master/vignettes/report3.Rmd"><code>vignettes/report3.Rmd</code></a></small>
      <div class="hidden name"><code>report3.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a><span class="header-section-number">1</span> Introduction</h1>
<p>Add context, how the work done in this quarter relates to previous work, the long term aims of the project - seehttps://github.com/saferactive/saferactive/issues/59</p>
<!-- ~300 words -->
<p>What kind of interventions are available?</p>
<p>Reference under-review.</p>
<p>Where do collisions happen?</p>
</div>
<div id="is-active-travel-getting-safer" class="section level1">
<h1 class="hasAnchor">
<a href="#is-active-travel-getting-safer" class="anchor"></a><span class="header-section-number">2</span> Is active travel getting safer?</h1>
<p>The aim of this section is to provide estimates of casualty risk for walking and cycling.</p>
<!-- High level aim. -->
<div id="collision" class="section level2">
<h2 class="hasAnchor">
<a href="#collision" class="anchor"></a><span class="header-section-number">2.1</span> Assigning collision data to a spatial grid</h2>
<p>Grouping crashes together at a small spatial scale help to identify crash hot spots, areas where crashes happen unusually often. To this end crash data for the last 10 years was rasterised to a 500m grid. With each raster a single pixel covers a 500m x 500m area and contains a single value, for example, the number of people killed in that area in 2018. It is also possible to create a stack of multiple raster layers to represent a chaining variable, such as time.</p>
<p>We created twelve raster stacks with each stack covering the years ten years of available data 2010 to 2019. Each raster stack was created for the whole of Great Britain.</p>
<ul>
<li><p>Cyclists killed or seriously injured during commuting hours</p></li>
<li><p>Cyclists killed or seriously injured during any time of day</p></li>
<li><p>Cyclists with any injury during commuting hours</p></li>
<li><p>Cyclists with any injury during during any time of day</p></li>
<li><p>Pedestrians killed or seriously injured during commuting hours</p></li>
<li><p>Pedestrians killed or seriously injured during any time of day</p></li>
<li><p>Pedestrians with any injury during commuting hours</p></li>
<li><p>Pedestrians with any injury during during any time of day</p></li>
<li><p>All people killed or seriously injured during commuting hours</p></li>
<li><p>All people killed or seriously injured during any time of day</p></li>
<li><p>All people with any injury during commuting hours</p></li>
<li><p>All people with any injury during during any time of day</p></li>
</ul>
<p>Commuting hours where defined as being between 7 - 10 AM and 4 - 7 PM, and where selected for special study as the PCT estimates of cycling levels are based on travel to work data.</p>
</div>
<div id="exploratory-analysis-of-walking-and-cycling-casualties-at-the-local-authority-level" class="section level2">
<h2 class="hasAnchor">
<a href="#exploratory-analysis-of-walking-and-cycling-casualties-at-the-local-authority-level" class="anchor"></a><span class="header-section-number">2.2</span> Exploratory analysis of walking and cycling casualties at the local authority level</h2>
<p>We have adjusted the plots to show KSI rate of active travellers per 100,000 people (left map). The KSI rate varies significantly with 90% of LAs being between 8.2 and 24.1 per 100,000 people. Scotland has notably low KSI rates while, Cumbria, has a very high rate.</p>
<div class="figure">
<span id="fig:LAtrends2"></span>
<img src="crash_la_plot-1.png" alt="Actiuve travel KSI per 100,000 resident population (left) and working population (right)" width="672"><p class="caption">
Figure 2.1: Actiuve travel KSI per 100,000 resident population (left) and working population (right)
</p>
</div>
<p>The City of London is an extreme outline due to it very low resident population. This highlights the denominator issue. That the KSI rate is depended on the value chosen as the denominator. In the case of the City of London, the resident population of about 2,500 is not representative of the amount of people travelling by road. A similar affect may be taking place in Cumbria which is a popular tourist destination and may have more active travellers than is represented by its population.</p>
<p>The right plot uses the 2011 census workplace population for England and Wales. The workplace population favours areas like the City of London which have high daytime activity but few night time residents. As people working is a subset of all people KSI rates will naturally appear higher. However the relative distribution of risk does change under a workplace population approach suggesting that in at least some areas this is an appropriate way to consider the data.</p>
<p>We can also compare the proportion of slightly injured people vs the proportion of KSI casualties. This we are using the weighting factors to account for the adjusted proportion of serious causalities caused by the historic use of different reporting systems. However this difference may still be due to different reporting practices across the country.</p>
<p>If this represent a genuine difference in safety, then LAs with a high ratio (dark green) are having proportionally more slight casualties than serious and fatal ones. This could be use to more segregation of active travellers from motor traffic, lower traffic speed or greater driver awareness of active travellers.</p>
<p>Looking at absolute number of KSI, the top 10 and bottom 10 are the same in 2010 and 2019 suggesting no overall change. The plot blow shows the Active Travel KSI rate per 100,000 workplace population from 2010 to 2019. The majority of LAs are shown with the thin grey lines, while the top 5 and bottom 5 LAs are highlighted in colour</p>
<div class="figure">
<span id="fig:LAtrends3"></span>
<img src="trends_plot-1.png" alt="Top and bottom LAs for KSI per 100,000)" width="672"><p class="caption">
Figure 2.2: Top and bottom LAs for KSI per 100,000)
</p>
</div>
<p>If we look for areas with the biggest change in KSI rates between 2010 and 2019 we can see some weak noisy trends, with areas such a Torbay increasing in KSIs and Stoke on Trent declining.</p>
<p>If we instead compare KSI against the resident population (adding in Scotland to the analysis) we can see that Aberdeen City have made a sustained decline in KSI rates over the last ten years, down over 60% from their high in 2011. Unlike some other LAs where the rate appears variable but steady, the KSI rate in Aberdeen has fallen almost every year and thus may represent a real world change in safety worthy of detailed study. In particular the Launch of Scotland’s Road Safety Framework in 2009 may have been successful in reducing Active Travel KSIs.</p>
<div class="figure">
<span id="fig:LAtrends4"></span>
<img src="trends3_plot-1.png" alt="Las with the greatest change in KSI per 100,000 between 2010 and 2019" width="672"><p class="caption">
Figure 2.3: Las with the greatest change in KSI per 100,000 between 2010 and 2019
</p>
</div>
</div>
<div id="assigning-census-derived-cycling-data-to-a-spatial-grid" class="section level2">
<h2 class="hasAnchor">
<a href="#assigning-census-derived-cycling-data-to-a-spatial-grid" class="anchor"></a><span class="header-section-number">2.3</span> Assigning census-derived cycling data to a spatial grid</h2>
<!-- This section is around 500 words -->
<p>To estimate the spatial distribution of cycling activity, measured in km per year, we started with data from the Propensity to Cycle Tool (PCT).
The Route Network layer in the PCT provides an indication of the number of commuter cyclists on different parts of the network, based on 2011 Census data reporting the number of people travelling between small (LSOA, average population ~2000) zones by mode of travel.
The route network in the PCT represents the ‘fastest’ routes for cycling between these LSOA zones and is not therefore designed to represent where cycling takes place (there are may be some links on the route network where the people prefer a slower but safer route).</p>
<p>Converting the spatial network representation of cycling to a spatial grid has the advantage of ‘smoothing’ out cycling activity across cities and allowing cycling levels to be presented in a form that is directly comparable with the crash data, which as also assigned to the spatial grid, as described in Section <a href="#collision">2.1</a>.
The three main steps were:</p>
<ul>
<li>Break-up long route network segments so that only segments with a length of 200 m or less remained.
To do this we initially solved the problem in R, developing the function <a href="https://docs.ropensci.org/stplanr/reference/line_breakup.html"><code>line_breakup()</code></a> in the <code>stplanr</code> package for the purpose.
After realising that this implementation would take several hours to complete on the national route network, we opted for a more computationally efficient approach that used R’s interface to GIS algorithms in the <code>qgisprocess</code> package.</li>
<li>Calculate the distance cycled, in km per year, on each of the shortened segments on the updated route networks as follows: <span class="math display">\[
d_y = t_s * t_y * d_s
\]</span> where <span class="math inline">\(d_y\)</span> is distance cycled per year per segment, <span class="math inline">\(t_s\)</span> is the number of trips per segment, <span class="math inline">\(t_y\)</span> is the number of trips in either direction made, on average, per year and <span class="math inline">\(d_s\)</span> is the distance of each segment.
<span class="math inline">\(t_s\)</span> and <span class="math inline">\(d_s\)</span> are taken directly from the PCT and <span class="math inline">\(t_y\)</span> was set to 253 commute trips per day multiplied by two, based on guidance from <span class="citation">Department for Transport (2020)</span> and based on the fact that the PCT counts only record cycling flows in one direction.
<a href="https://github.com/saferactive/saferactive/blob/master/code/rasters-rnet.R#L56">Summing</a> these values for all route network segments across England and Wales yielded a total of 1.1 billion km cycled in 2011, roughly a quarter of the 4.5 billion km cycled by any mode in England and Wales according to the National Travel Survey (see table NTS0303 and analysis in the script <a href="https://github.com/saferactive/saferactive/blob/master/code/nts-national-distance-cycled-year.R"><code>nts-national-distance-cycled-year.R</code></a> for details).</li>
<li>Add the total distance cycled of each segment per grid cell, based on the centre point (centroid) of each segment of 200 m or less.</li>
</ul>
<p>The results are shown in Figure <a href="#fig:cycled-yr">2.4</a>.</p>
<div class="figure">
<span id="fig:cycled-yr"></span>
<img src="https://camo.githubusercontent.com/4404fcf913b19c521aa249cd14e8b047c8a2a646/68747470733a2f2f692e696d6775722e636f6d2f57596b6c59476a2e706e67" alt="Estimates of distance cycled per year (thousand km per year of cycle commuting distance) passing through each 500 m grid cell, based on analysis of Census data on the route network from the PCT, for a rural area (Herefordshire, left) and an urban area (London, right)." width="40%"><img src="https://user-images.githubusercontent.com/1825120/97345445-fed2ae80-1881-11eb-8b1e-18553c1805c1.png" alt="Estimates of distance cycled per year (thousand km per year of cycle commuting distance) passing through each 500 m grid cell, based on analysis of Census data on the route network from the PCT, for a rural area (Herefordshire, left) and an urban area (London, right)." width="40%"><p class="caption">
Figure 2.4: Estimates of distance cycled per year (thousand km per year of cycle commuting distance) passing through each 500 m grid cell, based on analysis of Census data on the route network from the PCT, for a rural area (Herefordshire, left) and an urban area (London, right).
</p>
</div>
</div>
<div id="spatial-analysis-of-inferred-risk-over" class="section level2">
<h2 class="hasAnchor">
<a href="#spatial-analysis-of-inferred-risk-over" class="anchor"></a><span class="header-section-number">2.4</span> Spatial analysis of inferred risk over</h2>
<p>Robin ~500 words</p>
<p>Which areas seem to be safer?</p>
<p>Analyse the commute crash numbers divided by the estimated commute cycling activite.</p>
</div>
<div id="modelling-spatio-temporal-change-in-cycling-uptake-based-on-count-data" class="section level2">
<h2 class="hasAnchor">
<a href="#modelling-spatio-temporal-change-in-cycling-uptake-based-on-count-data" class="anchor"></a><span class="header-section-number">2.5</span> Modelling spatio-temporal change in cycling uptake based on count data</h2>
<p>As described in <a href="#assigning-collision-data-to-a-spatial-grid">Section 2.3</a>, our primary data source for estimating levels of cycling activity across space is the Propensity to Cycle Tool.
This takes 2011 Census data on method of travel to work, and routes these journeys using a CycleStreets routing algorithm, allowing us to estimate cycle potential on each link of the road network.
However, this does not give us any information on changes in cycling uptake through time.
To estimate changes through time, we must investigate data from manual cycle counters.</p>
<p>We have used two key data sources to model this spatio-temporal change in cycling uptake.
The first is DfT count data.
This is open source data available from the Department for Transport website <a href="https://roadtraffic.dft.gov.uk/downloads" class="uri">https://roadtraffic.dft.gov.uk/downloads</a>.
While the raw data is available for the years 2000 - 2019, we have focused on the decade 2010-2019, since there is more consistency in the type of roads being surveyed over this time period.</p>
<p>The second data source is Transport for London cycle counts, collected as part of three data collection programmes, for Central London, Inner London and Outer London <a href="https://cycling.data.tfl.gov.uk/" class="uri">https://cycling.data.tfl.gov.uk/</a>.
There are other TfL count programmes focusing on specific interventions such as the cycle superhighways and Mini-Holland schemes, but we have not used these to keep our results representative of London as a whole.
The Central London counts are available from 2014, but the other counts are only available from 2015 to 2019, so we have used this time period.</p>
<p>To make the best possible use of the available data, we have developed two models.
For change in cycling uptake over the years 2010-2015, we have a model based solely on the DfT counts, as these are the only ones available during this time period.
For the years 2015-2019, our model combines both the DfT and TfL counts.
To assess change across the full decade, we combine these two models, computing changes since 2015 on top of the changes seen up to this point.</p>
<p>Rather than using the raw cycle counts, i.e. number of cyclists passing a given point per hour, we assess relative change in these cycle counts. The number of cyclists varies greatly from one road to another, and the same count points are not always used each year. Therefore the variable of interest is the change in cycle volumes at a given count point: <span class="math display">\[
Ch_y = C_y / C_m
\]</span> where <span class="math inline">\(Ch_y\)</span> is the change in cycle count for a given year, <span class="math inline">\(C_y\)</span> is the cycle count for the year of interest, and <span class="math inline">\(C_m\)</span> is the mean cycle count at that count point across all years within the model period that the count point is in use.</p>
<p>To avoid the impacts of high relative change in cycle flows at count points with very low absolute numbers of cyclists, we excluded all data from locations with a mean cycle flow &lt; 5, or with zero cyclists in any single year.
We also excluded locations that did not have at least two years of data within the relevant period.</p>
<div id="data-cleaning-steps" class="section level3">
<h3 class="hasAnchor">
<a href="#data-cleaning-steps" class="anchor"></a><span class="header-section-number">2.5.1</span> Data cleaning steps</h3>
<p>Since our primary spatial model of cycling potential is derived from Census 2011 data accessed via the Propensity to Cycle Tool, we had to adapt the count data accordingly.
As part of the data cleaning process, we made efforts to correspond closely with Propensity to Cycle Tool methodologies.
All of these adjustments were made on the raw count data, prior to calculating change in cycle volumes.
Firstly, we combined bi-directional data to get a single measure of cycle volume per site, similar to the PCT which combines journeys in both directions between a common origin and destination.
Secondly, we used peak hour flows only.
Our spatial model is based solely on travel to work, so temporal changes to this model should reflect changes in commuter volumes, not changes in whole-day cycle volumes.
The TfL counts run from 06:00 to 22:00, while the DfT counts run from 07:00 to 19:00, but we selected only the counts from peak commuter hours, defined by TfL as being 07:00 - 10:00 and 16:00 - 19:00.</p>
<p>Further data cleaning was conducted for the seasonal adjustment of cycle flows and the generation of single annual estimates for each count point.
In the TfL Central London dataset, four Survey waves are conducted per year, corresponding with the standard quarterly periods.
The final wave for which data is available is 2019 Q3.
By contrast, in the TfL Inner and Outer London counts and the DfT counts, each location is surveyed at most once per year.</p>
<p>Cycling uptake varies across the year due to factors such as weather conditions.
TfL has produced seasonal adjustment factors for each of the four quarterly periods, to account for this.
We have used these adjustment factors to control for seasonality, and to calculate a mean annual count for each Central London site.
We desired a single annual figure to avoid giving these central London locations four times the weighting of the other counts when generating the GAM models, as described below.
Meanwhile, the Inner and Outer London TfL counts are designed to represent the second quarterly period (April to June), so we used the Q2 adjustment factor to normalise these counts.
For the DfT counts, we normalised the raw values based on the adjustment factor for whichever quarterly period the count date fell within.</p>
</div>
<div id="trends-in-mean-cycle-flows" class="section level3">
<h3 class="hasAnchor">
<a href="#trends-in-mean-cycle-flows" class="anchor"></a><span class="header-section-number">2.5.2</span> Trends in mean cycle flows</h3>
<p>Mean change in cycle flows over the years 2010-2015 is shown for all DfT count points in London in Figure <a href="#fig:early-year">2.5</a>.</p>
<div class="figure">
<span id="fig:early-year"></span>
<img src="peak-flow-trend-early-years.png" alt="Mean change in peak cycle flows for count points in London in the years 2010-2015" width="621"><p class="caption">
Figure 2.5: Mean change in peak cycle flows for count points in London in the years 2010-2015
</p>
</div>
<p>In Figure <a href="#fig:late-year">2.6</a>, we show mean change in cycle counts over the years 2015-2019, for both DfT and TfL count points. We can see that the trends are quite different in TfL and DfT count points.
The TfL counts rise throughout this period, while the DfT counts peak in 2016 and fall thereafter.</p>
<div class="figure">
<span id="fig:late-year"></span>
<img src="peak-flow-trend-late-years.png" alt="Mean change in peak cycle flows for count points in London in the years 2015-2019" width="621"><p class="caption">
Figure 2.6: Mean change in peak cycle flows for count points in London in the years 2015-2019
</p>
</div>
</div>
<div id="predicting-cycle-uptake-using-gam-models" class="section level3">
<h3 class="hasAnchor">
<a href="#predicting-cycle-uptake-using-gam-models" class="anchor"></a><span class="header-section-number">2.5.3</span> Predicting cycle uptake using GAM models</h3>
<p>To estimate spatio-temporal changes in cycling uptake over the decade 2010-2019, we have created two GAM models using the <code>mgcv</code> R library.
These use the count data to generate smoothed estimates of change in cycling levels in London across this period.
The models use splines to represent the partial effects of time and space on cycling uptake.
The two models follow the same structure, but the first is for the years 2010-2015, using DfT data only, while the second is for the years 2015-2019 and uses both DfT and TfL data.</p>
<p>The response variable in these models is <span class="math inline">\(Ch_y\)</span> (change in cycle flows).
However, total number of cycles (across all years within the model period) per count point is used as a weighting factor.
This avoids giving undue influence to locations where the relative change in cycle flows may be high but the absolute number of cycles is low.
It also reduces the influence of count locations that are sampled in some years only, compared to those sampled every year.</p>
<p>The error structure in both models follows a Scaled-t distribution.
This is appropriate for continuous response variables which are heavily tailed.
Temporal change is modelled as a cubic regression spline for the term <code>year</code>.
We gave a low number of knots (4 knots for 2010-2015 and 3 knots for 2015-2019) to prevent overfitting.
Cubic regression splines are appropriate for variables with relatively few knots, spread evenly across the extent of the parameter values.
Space (<code>eastings</code> and <code>northings</code>) is modelled using a Duchon spline, which works well with two-dimensional parameters.
We used 100 knots, to allow more complex spatial patterns to be represented.
An interaction term (using the same spline types and numbers of knots) is used for the interaction between time and space.</p>
<p>The partial effects of <code>year</code> in these models are shown in Figure <a href="#fig:gam-year">2.7</a>. These closely resemble the trends observed in the raw data, in Figures <a href="#fig:early-year">2.5</a> and <a href="#fig:late-year">2.6</a>.
These graphs show the mean effect of <code>year</code>, but this will vary spatially due to the presence of the interaction terms in the GAM models.</p>
<div class="figure">
<span id="fig:gam-year"></span>
<img src="gam-partial-effect-year-early.png" alt="Partial effects of year in the GAM models. a) left: for the years 2010-2015; b) right: for the years 2015-2019" width="40%"><img src="gam-partial-effect-year-late.png" alt="Partial effects of year in the GAM models. a) left: for the years 2010-2015; b) right: for the years 2015-2019" width="40%"><p class="caption">
Figure 2.7: Partial effects of year in the GAM models. a) left: for the years 2010-2015; b) right: for the years 2015-2019
</p>
</div>
<p>We use the models to predict annual changes in cycling uptake over a 500m grid covering the whole of London.
This creates a smoothed surface that matches the resolution of the spatial grids we have already generated for collision and census-derived cycling data.
We can therefore obtain estimates of change in cycling uptake at the same spatial resolution as the collision data.</p>
<p>By assigning each grid point to a London Borough, we can then investigate changes in cycling uptake at the Borough level. These can be seen in Figure <a href="#fig:borough-preds">2.8</a>. <strong><em>change this to use weighted values</em></strong></p>
<div class="figure">
<span id="fig:borough-preds"></span>
<img src="peak-boroughs.png" alt="Predicted change in cycling uptake for each London Borough, over the years 2010-2019" width="971"><p class="caption">
Figure 2.8: Predicted change in cycling uptake for each London Borough, over the years 2010-2019
</p>
</div>
</div>
</div>
<div id="validation-of-cycling-uptake-model-results" class="section level2">
<h2 class="hasAnchor">
<a href="#validation-of-cycling-uptake-model-results" class="anchor"></a><span class="header-section-number">2.6</span> Validation of cycling uptake model results</h2>
<p>We have verified the GAM predictions against the TfL count data, to ensure we are representing the true variability of the data.
This is conducted using the coefficient of determination (R squared).
The result gives an R squared of 0.194, showing the extent to which the model is able to predict counts across London in the years 2015-2019 (see Figure <a href="#fig:validation">2.9</a>).</p>
<div class="figure">
<span id="fig:validation"></span>
<img src="peak-hour-correlation.png" alt="Correlation between mean TfL cycle counts and GAM predictions of change, per year and per London Borough" width="586"><p class="caption">
Figure 2.9: Correlation between mean TfL cycle counts and GAM predictions of change, per year and per London Borough
</p>
</div>
<p>Further validation work should include sensitivity analysis involving the exclusion of portions of the dataset, and the prediction of these excluded portions.
We also need to obtain confidence intervals to constrain the cycling uptake predictions.</p>
<p>We can also investigate how correlations change with greater temporal and spatial aggregation of data points.
This may include aggregation to the Borough level, and the grouping of neighbouring Boroughs.</p>
</div>
<div id="modelling-spatio-temporal-change-in-collision-risk" class="section level2">
<h2 class="hasAnchor">
<a href="#modelling-spatio-temporal-change-in-collision-risk" class="anchor"></a><span class="header-section-number">2.7</span> Modelling spatio-temporal change in collision risk</h2>
<p>Joey ~500 words</p>
<p>Depending on the outcome of the previous analysis.</p>
<p>Which kinds of areas seem to becoming safer for walking and cycling in relation to the modelling?</p>
</div>
</div>
<div id="scenarios-of-change" class="section level1">
<h1 class="hasAnchor">
<a href="#scenarios-of-change" class="anchor"></a><span class="header-section-number">3</span> Scenarios of change</h1>
<p>Joey and Robin</p>
<p>Majority of collisions on boundary roads.</p>
<div id="traffic-calming-measures" class="section level2">
<h2 class="hasAnchor">
<a href="#traffic-calming-measures" class="anchor"></a><span class="header-section-number">3.1</span> Traffic calming measures</h2>
<p>There is OSM data for the years 2014 - 2019, providing insight on the date of installation of traffic calming measures.
Using two time points (i.e. 2014 and 2018), we can investigate differences between the first and second halves of the decade.</p>
<!-- ## 20 mph zones -->
</div>
<div id="protected-cycleways" class="section level2">
<h2 class="hasAnchor">
<a href="#protected-cycleways" class="anchor"></a><span class="header-section-number">3.2</span> Protected cycleways</h2>
<p>Counts from cycle superhighways and quietways are available from TfL, typically including 1 year of baseline count data from before installation, and around 4 years of post-installation count data.
We can speak to TfL to get better insight on the exact timings of implementation of these schemes.</p>
<!-- ## Traffic reduction -->
</div>
<div id="roadspace-reallocation" class="section level2">
<h2 class="hasAnchor">
<a href="#roadspace-reallocation" class="anchor"></a><span class="header-section-number">3.3</span> Roadspace reallocation</h2>
</div>
<div id="low-traffic-neighbourhoods" class="section level2">
<h2 class="hasAnchor">
<a href="#low-traffic-neighbourhoods" class="anchor"></a><span class="header-section-number">3.4</span> Low Traffic Neighbourhoods</h2>
<p>Counts from Mini-Holland schemes are available from TfL, typically including 1 year of baseline count data from before installation, and around 4 years of post-installation count data.
We can speak to TfL to get better insight on the exact timings of implementation of these schemes.</p>
</div>
</div>
<div id="data-visualisation" class="section level1">
<h1 class="hasAnchor">
<a href="#data-visualisation" class="anchor"></a><span class="header-section-number">4</span> Data visualisation</h1>
<p>We continue to develop approaches to visually analysing road crash data and have divided our efforts here into two areas: <strong>exploring</strong> and <strong>quantifying</strong> risk.</p>
<div id="exploring-risk" class="section level2">
<h2 class="hasAnchor">
<a href="#exploring-risk" class="anchor"></a><span class="header-section-number">4.1</span> Exploring risk</h2>
<p>Road crash data are spatially and temporally precise but also attribute-rich. The Stast19 dataset for example has many variables describing numerous aspects associated with road conditions and vehicle types. Exploratory visual analysis interfaces provide a mechanism for quickly investigating these.</p>
<p>As a quick way of illustrating this, below are bar charts displaying crash frequencies for all (left) and active casualties (right) by road speed classification. Crashes resulting in a KSI (fatal or serious injury) are dark red, those resulting a slight injury light red. It is not surprising that 30mph roads are the modal category of road for all crahses, but especially those involving active travel modes. A more interesting question is around how relative injury severity varies by road type and vehicle mode. To quickly investigate this we generate <a href="https://en.wikipedia.org/wiki/Mosaic_plot">mosaic plots</a>, a sort of visual contingency table where plot width varies according to <em>absolute number</em> of crashes in this case and height according to <em>relative number</em> of crashes resulting in a KSI (e.g. the relative height of the dark red bars). Whilst the pattern implied by this layout again could be anticipated, it does demonstrate the obvious effect on injury severity of increasing road speed limits on KSI rates for crashes involving pedestrians and cyclists.</p>
<!-- Link to crashes on hierarchy of vulnerability:  -->
<!-- https://itsleeds.github.io/rrsrr/join.html#joining-vehicle-data -->
<!-- can we make total height of each bar proportional to total n. crashes? -->
<div class="figure">
<span id="fig:crashes-speed"></span>
<img src="crashes_speed_all.png" alt="Plots of road crashes by road type – comparison of all versus active-only crashes. Top row: rural, bottom row: urban. Recorded crashes in GB 2017-2019." width="45%"><img src="crashes_speed_active.png" alt="Plots of road crashes by road type – comparison of all versus active-only crashes. Top row: rural, bottom row: urban. Recorded crashes in GB 2017-2019." width="45%"><p class="caption">
Figure 4.1: Plots of road crashes by road type – comparison of all versus active-only crashes. Top row: rural, bottom row: urban. Recorded crashes in GB 2017-2019.
</p>
</div>
<p>Once the code template for these plots is created, it is very easy to substitute in other variables that we think may be discriminating – lighting and surface condition (wetness). Here again we the see strong effect on relative injury severity. We do not advocate using these plots for decision-making, for example prioritising lighting and surface drainage over other candidate interventions, but instead for their application as a low-cost mechanism for initially proposing factors that might then be incorporayed into a more formal data analysis.</p>
<div class="figure">
<span id="fig:crashes-surface"></span>
<img src="crashes_all_conditions.png" alt="Plots of road crashes by road condition – comparison of all versus active-only crashes. Recorded crashes in GB 2017-2019." width="45%"><img src="crashes_active_conditions.png" alt="Plots of road crashes by road condition – comparison of all versus active-only crashes. Recorded crashes in GB 2017-2019." width="45%"><p class="caption">
Figure 4.2: Plots of road crashes by road condition – comparison of all versus active-only crashes. Recorded crashes in GB 2017-2019.
</p>
</div>
<p>A benefit of using Mosaic plots for presenting categorical data such as this is that they are data rich. For example, we might extend this analysis to profile crashes by travel mode. In the plots below we focus on London. That cars are the modal vehicle category is to be expected, but it is again useful to emphasise the fact that relative injury severity increases with motorbikes and bikes and also that the vehicle-crash mix varies according to geographic context.</p>
<div class="figure">
<span id="fig:crashes-borough"></span>
<img src="spine_aspatial.png" alt="Plots of road crashes by vehicle type. All recorded crashes in London 2009-2019." width="95%"><p class="caption">
Figure 4.3: Plots of road crashes by vehicle type. All recorded crashes in London 2009-2019.
</p>
</div>
<div class="figure">
<span id="fig:crashes-borough-spatial"></span>
<img src="spines_borough.png" alt="Plots of road crashes by vehicle type and London borough. All recorded crashes in London 2009-2019." width="95%"><p class="caption">
Figure 4.4: Plots of road crashes by vehicle type and London borough. All recorded crashes in London 2009-2019.
</p>
</div>
</div>
<div id="quantifying-risk" class="section level2">
<h2 class="hasAnchor">
<a href="#quantifying-risk" class="anchor"></a><span class="header-section-number">4.2</span> Quantifying risk</h2>
<p>Inevitably when analysing road crash data we wish to make inferences about casualty rates through comparison – over time and by geographic areas. There are difficulties with doing this – comparing rates across areas (and time) – that are more idiosyncratic relating to the way in which road crash data are collected and choice of denominator, but also established problems in statistics – for example, uncertainties due to sampling size and multiple comparison.</p>
<p>Key to this work is incorporating appropriate denominators for estimating exposure, discussed above. However, we are also implementing visual data analysis approaches to uncertainty representation. For illustrative purposes below are maps of relative risk comparing relative injury severity ratio for crashes in each Police Force area against that which would be expected given the national average. Where a Police Force has an injury severity ratio greater than the national average it is red, less than the national average blue. The left-most map contains risk ratios derived from crash data between 2017-2019; in the middle we demonstrate how these have shifted year-on-year, with no adjustment made for CRASH and COPA re-coding and in the right-most map we represent model uncertainty by drawing year-on-year lines that result from a bootstrap resample. Whilst representing a full empirical bootstrap distribution may be one means of representing uncertainty, we are currently investigating others, for example <a href="https://medium.com/hci-design-at-uw/hypothetical-outcomes-plots-experiencing-the-uncertain-b9ea60d7c740">hypothetical outcome plots</a>, increasingly used in journalism and public-facing domains.</p>
<div class="figure">
<span id="fig:rr-force"></span>
<img src="rr_cots.png" alt="KSI risk ratios by Police Force area in England and Wales, year-on-year analysis, plus bootstrapped raw KSI rates. 2017-2019 data shown in left plot, 2009-2019 data shown in middle and right plots." width="95%"><p class="caption">
Figure 4.5: KSI risk ratios by Police Force area in England and Wales, year-on-year analysis, plus bootstrapped raw KSI rates. 2017-2019 data shown in left plot, 2009-2019 data shown in middle and right plots.
</p>
</div>
<p>Roger ~500 words - ideas from paper</p>
</div>
</div>
<div id="web-development" class="section level1">
<h1 class="hasAnchor">
<a href="#web-development" class="anchor"></a><span class="header-section-number">5</span> Web development</h1>
<p>Layik ~500 words</p>
</div>
<div id="next-steps" class="section level1">
<h1 class="hasAnchor">
<a href="#next-steps" class="anchor"></a><span class="header-section-number">6</span> Next steps</h1>
<p>Robin + Joey</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-departmentfortransport_active_2020">
<p>Department for Transport. 2020. “Active Mode Appraisal Toolkit User Guide.” Department for Transport.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Robin Lovelace, Malcolm Morgan, Layik Hama, Caroline Tait, Joey Talbot.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
